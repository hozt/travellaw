---
import Layout from "../layouts/Layout.astro";
import ContactForm from '../components/ContactForm.astro';
import BannerTitle from "../components/BannerTitle.astro";
import Breadcrumb from "../components/Breadcrumb.astro";
import client from '../lib/apolloClient';
import { GET_TEMPLATE } from '../lib/queries';

const { data: templateData } = await client.query({
  query: GET_TEMPLATE,
  variables: { slug: 'video' }
});

const template = templateData.templateBy;
const title = template?.title || `Contact`;
---

<Layout title={title} description={template?.metaDescription}>
  <Breadcrumb crumbs={[{label: title }]} />
  <BannerTitle
    title={title}
    subtitle={template?.subtitle}
    image={template?.bannerImage?.sourceUrl}
    width={template?.bannerImage?.mediaDetails.width}
    height={template?.bannerImage?.mediaDetails.height}
  />
  <div class="container mx-auto">
    {template?.content && (
      <div class="content" set:html={template?.content} />
    )}
    <ContactForm />
  </div>
</Layout>