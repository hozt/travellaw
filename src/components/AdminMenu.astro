---
// Your existing Astro component code
// get values from Astro.props
const { pageId, postId, templateId } = Astro.props;
---

<div id="adminMenuContainer"></div>

<script define:vars={{ pageId, postId, templateId }}>
  async function loadAdminMenu() {
    const editorKey = sessionStorage.getItem('isEditor');
    if (!editorKey) return;

    try {
      const response = await fetch(`/admin-menu?postId=${postId || ''}&pageId=${pageId || ''}&templateId=${templateId || ''}`, {
        headers: { 'X-Editor-Key': editorKey }
      });

      if (response.ok) {
        const menuHTML = await response.text();
        document.getElementById('adminMenuContainer').innerHTML = menuHTML;
      }
    } catch (error) {
      console.error('Failed to load admin menu:', error);
    }
  }

  // Load the admin menu when the script runs
  loadAdminMenu();
</script>