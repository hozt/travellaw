---
// Your existing Astro component code
---

<div id="adminMenuContainer"></div>

<script>
  async function loadAdminMenu() {
    const editorKey = sessionStorage.getItem('isEditor');
    if (!editorKey) return;

    const url = new URL(window.location.href);
    const postId = url.searchParams.get('postId');
    const pageId = url.searchParams.get('pageId');
    const templateId = url.searchParams.get('templateId');

    try {
      const response = await fetch(`/api/admin-menu?postId=${postId || ''}&pageId=${pageId || ''}&templateId=${templateId || ''}`, {
        headers: { 'X-Editor-Key': editorKey }
      });

      if (response.ok) {
        const menuHTML = await response.text();
        document.getElementById('adminMenuContainer').innerHTML = menuHTML;
      }
    } catch (error) {
      console.error('Failed to load admin menu:', error);
    }
  }

  // Load the admin menu when the script runs
  loadAdminMenu();
</script>